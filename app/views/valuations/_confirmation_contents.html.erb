<%# locals: (account:, entry:, reconciliation_dry_run:, is_update:, action_verb:) %>

<div class="space-y-4 text-sm text-secondary">
  <% if account.investment? %>
    <% brokerage_cash = reconciliation_dry_run.new_cash_balance || 0 %>
    <% holdings_value = reconciliation_dry_run.new_balance - brokerage_cash %>

    <p>
      <%= t(".investment_intro_prefix", action: action_verb) %>
      <span class="font-medium text-primary"><%= entry.date.strftime("%B %d, %Y") %></span>
      <%= t(".investment_intro_suffix") %>
    </p>

    <div class="bg-container rounded-lg p-4 space-y-2 border border-primary">
      <div class="flex justify-between">
        <span><%= t(".total_account_value") %></span>
        <span class="font-medium text-primary"><%= Money.new(reconciliation_dry_run.new_balance, account.currency).format %></span>
      </div>
      <div class="flex justify-between text-xs">
        <span><%= t(".holdings_value") %></span>
        <span><%= Money.new(holdings_value, account.currency).format %></span>
      </div>
      <div class="flex justify-between text-xs">
        <span><%= t(".brokerage_cash") %></span>
        <span class="<%= brokerage_cash.negative? ? "text-red-500" : "text-green-500" %>"><%= Money.new(brokerage_cash, account.currency).format %></span>
      </div>
    </div>
  <% else %>
    <p>
      <%= t(".non_investment_intro_prefix",
             action: action_verb.capitalize,
             balance_type: (
               if account.depository?
                 t(".balance_types.account_balance")
               elsif account.credit_card?
                 t(".balance_types.credit_card_balance")
               elsif account.loan?
                 t(".balance_types.loan_balance")
               elsif account.property?
                 t(".balance_types.property_value")
               elsif account.vehicle?
                 t(".balance_types.vehicle_value")
               elsif account.crypto?
                 t(".balance_types.crypto_balance")
               elsif account.other_asset?
                 t(".balance_types.asset_value")
               elsif account.other_liability?
                 t(".balance_types.liability_balance")
               else
                 t(".balance_types.balance")
               end
             )
           ) %>
      <span class="font-medium text-primary"><%= entry.date.strftime("%B %d, %Y") %></span>
      <%= t(".non_investment_intro_middle") %>
      <span class="font-medium text-primary"><%= entry.amount_money.format %></span>.
    </p>
  <% end %>

  <p><%= t(".recalculated_notice", change_type: is_update ? t(".change") : t(".update")) %></p>
</div>
